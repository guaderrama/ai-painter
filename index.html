<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iván Guaderrama - Interactive Art Gallery</title>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&family=Spline+Sans%3Awght%40400%3B500%3B700&family=Be+Vietnam+Pro%3Awght%40400%3B500%3B700%3B900"
    />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <link rel="stylesheet" href="style.css">
    <style>
        .screen { display: none; }
        .screen.active { display: flex; }
        
        /* Welcome Slides */
        .welcome-slide {
            display: none;
            opacity: 0;
            transform: translateX(50px);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .welcome-slide.active {
            display: block;
            opacity: 1;
            transform: translateX(0);
        }
        
        .welcome-slide.exiting {
            opacity: 0;
            transform: translateX(-50px);
        }
        
        .welcome-dot {
            transition: all 0.3s ease;
        }
        
        .welcome-dot.active {
            width: 2rem;
            background-color: #1980e6 !important;
        }
        
        /* Comparison Buttons */
        .comparison-btn {
            background-color: #293038;
            color: #9dabb8;
        }
        
        .comparison-btn.active {
            background-color: #1980e6;
            color: white;
        }
        
        .comparison-btn:hover {
            background-color: #3a4149;
        }
        
        .comparison-btn.active:hover {
            background-color: #1670c9;
        }
    </style>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
    
    <!-- Stripe SDK -->
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body style='font-family: "Spline Sans", "Noto Sans", sans-serif;'>

    <!-- Screen 0: Welcome/Onboarding -->
    <div id="welcome-screen" class="screen relative size-full min-h-screen flex-col bg-[#111418] justify-center items-center overflow-x-hidden p-4">
        <!-- Skip Button -->
        <button id="skip-welcome" class="absolute top-4 right-4 text-sm text-gray-400 hover:text-white transition duration-300">
            Skip
        </button>
        
        <!-- Slide Container -->
        <div class="w-full max-w-2xl mx-auto text-center">
            <!-- Slide 1 -->
            <div class="welcome-slide active" data-slide="1">
                <div class="mb-8">
                    <svg class="mx-auto mb-6" width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="60" cy="60" r="60" fill="#1980e6" opacity="0.1"/>
                        <path d="M60 30 L75 45 L90 35 L80 60 L90 75 L70 85 L60 70 L50 85 L30 75 L40 60 L30 35 L45 45 Z" fill="#1980e6"/>
                    </svg>
                </div>
                <h1 class="text-white text-4xl font-bold mb-4">A New Way to Experience My Art</h1>
                <p class="text-[#9dabb8] text-lg leading-relaxed max-w-xl mx-auto">
                    Welcome to my interactive art gallery. Here, technology meets creativity in a deeply personal way.
                </p>
            </div>

            <!-- Slide 2 -->
            <div class="welcome-slide" data-slide="2">
                <div class="mb-8">
                    <svg class="mx-auto mb-6" width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="60" cy="60" r="60" fill="#1980e6" opacity="0.1"/>
                        <circle cx="60" cy="60" r="30" stroke="#1980e6" stroke-width="3" fill="none"/>
                        <circle cx="60" cy="60" r="5" fill="#1980e6"/>
                    </svg>
                </div>
                <h1 class="text-white text-4xl font-bold mb-4">See Your World Through My Eyes</h1>
                <p class="text-[#9dabb8] text-lg leading-relaxed max-w-xl mx-auto">
                    Upload any photo and watch as it's transformed through my artistic vision, powered by AI that understands my style.
                </p>
            </div>

            <!-- Slide 3 -->
            <div class="welcome-slide" data-slide="3">
                <div class="mb-8">
                    <svg class="mx-auto mb-6" width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="60" cy="60" r="60" fill="#1980e6" opacity="0.1"/>
                        <path d="M40 60 L50 50 L60 70 L70 40 L80 60" stroke="#1980e6" stroke-width="3" fill="none" stroke-linecap="round"/>
                    </svg>
                </div>
                <h1 class="text-white text-4xl font-bold mb-4">A Unique Interpretation, Every Time</h1>
                <p class="text-[#9dabb8] text-lg leading-relaxed max-w-xl mx-auto">
                    Each transformation is one-of-a-kind, blending your memories with expressive brushstrokes and vibrant colors.
                </p>
            </div>

            <!-- Slide 4 -->
            <div class="welcome-slide" data-slide="4">
                <div class="mb-8">
                    <svg class="mx-auto mb-6" width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="60" cy="60" r="60" fill="#1980e6" opacity="0.1"/>
                        <path d="M60 30 L70 50 L90 50 L75 65 L80 85 L60 75 L40 85 L45 65 L30 50 L50 50 Z" fill="#1980e6"/>
                    </svg>
                </div>
                <h1 class="text-white text-4xl font-bold mb-4">Your First 3 Canvases Are a Gift from Me to You</h1>
                <p class="text-[#9dabb8] text-lg leading-relaxed max-w-xl mx-auto mb-8">
                    Start your creative journey with 3 complimentary transformations. No credit card required.
                </p>
            </div>
        </div>

        <!-- Navigation -->
        <div class="absolute bottom-8 left-0 right-0 flex flex-col items-center gap-6">
            <!-- Dots Indicator -->
            <div class="flex gap-2">
                <div class="welcome-dot active w-2 h-2 rounded-full bg-[#1980e6]" data-dot="1"></div>
                <div class="welcome-dot w-2 h-2 rounded-full bg-[#9dabb8]" data-dot="2"></div>
                <div class="welcome-dot w-2 h-2 rounded-full bg-[#9dabb8]" data-dot="3"></div>
                <div class="welcome-dot w-2 h-2 rounded-full bg-[#9dabb8]" data-dot="4"></div>
            </div>
            
            <!-- Buttons -->
            <div class="flex gap-4">
                <button id="prev-slide" class="px-6 py-3 bg-[#293038] text-white rounded-xl font-bold hover:bg-gray-700 transition duration-300 opacity-50 cursor-not-allowed">
                    Previous
                </button>
                <button id="next-slide" class="px-8 py-3 bg-[#1980e6] text-white rounded-xl font-bold hover:bg-blue-700 transition duration-300">
                    Next
                </button>
            </div>
        </div>
    </div>

    <!-- Screen 1: Main Login -->
    <div id="login-screen" class="screen active relative size-full min-h-screen flex-col bg-[#111418] dark justify-between group/design-root overflow-x-hidden">
      <div>
        <h1 class="text-white tracking-light text-[32px] font-bold leading-tight px-4 text-center pb-3 pt-6">Iván Guaderrama</h1>
        <h2 class="text-[#9dabb8] text-xl font-medium leading-tight px-4 text-center pb-2">Interactive Art Gallery</h2>
        <p class="text-white text-base font-normal leading-normal pb-3 pt-1 px-4 text-center">Transform your photos into unique artworks through AI</p>
        <div class="flex overflow-y-auto [-ms-scrollbar-style:none] [scrollbar-width:none] [&amp;::-webkit-scrollbar]:hidden">
          <div class="flex items-stretch p-4 gap-3">
            <div class="flex h-full flex-1 flex-col gap-4 rounded-lg min-w-60">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl flex flex-col"
                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuD7yPkzkhK7qRx7Gm21et05D4XIWoWh6XTXtMFalhrd1B46frwua3hfWc07s1vOXDnFYesH7lh13CR00V3VZwmI0s1CZbuNmSOGR-IC2s0OQMY828ZhrCOmnFL0z2AkoxzQpj1mjsRuR46udNSeVDwTQtU31gYZs2HHwQpYVZgXiNbxem_VgarJqAMiK-iq1gnf_ThDQrMSTsTXB_hZTIUPyKgcHGYuKv__c3jWDUQjh5yvUAxBEAfwTNfw_U44zP7408B3wsJL8dqR");'
              ></div>
              <p class="text-white text-base font-medium leading-normal">AI Painting</p>
            </div>
            <div class="flex h-full flex-1 flex-col gap-4 rounded-lg min-w-60">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl flex flex-col"
                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBGk0muuixq4KBz0XZ1JscN52m_VwJwnCBGSIT3sxxo9lEXYYBnTQ2weJI5GuV2X43C-NxTsIAUqsCbUxI6GlilshVPunKDFK13VYciOra_o-Is9dBYPebaOFcUvGtN31-adnMZB-2tLlJgCBNdZLdlp7YLW2SoJrvITgExH5DK5dzrSxBV2zcxFt6HvoUvTfDM0gK9QuVVUmkcfpQiIqkDRardn_mJBr3al8eV1iDIGM_ZaD0tcqtG2wyIDa56odhEb419Z28VjL5k");'
              ></div>
              <p class="text-white text-base font-medium leading-normal">Original Photo</p>
            </div>
          </div>
        </div>
        <div class="flex justify-center">
          <div class="flex flex-1 gap-3 max-w-[480px] flex-col items-stretch px-4 py-3">
            <button
              id="login-google"
              class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 px-5 bg-[#1980e6] text-white text-base font-bold leading-normal tracking-[0.015em] w-full"
            >
              <span class="truncate">Continue with Google</span>
            </button>
            <button
              id="login-email-main"
              class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 px-5 bg-[#293038] text-white text-base font-bold leading-normal tracking-[0.015em] w-full"
            >
              <span class="truncate">Continue with Email</span>
            </button>
          </div>
        </div>
      </div>
      <div>
        <p class="text-[#9dabb8] text-sm font-normal leading-normal pb-3 pt-1 px-4 text-center">By continuing, you agree to our Terms of Service and Privacy Policy.</p>
        <div class="h-5 bg-[#111418]"></div>
      </div>
    </div>

    <!-- Screen 1.5: Email Login -->
    <div id="email-login-screen" class="screen relative size-full min-h-screen flex-col bg-[#111418] dark justify-start group/design-root overflow-x-hidden p-4">
        <div class="flex items-center w-full mb-8">
            <div id="back-to-main-login" class="text-white flex size-12 shrink-0 items-center cursor-pointer">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256"><path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path></svg>
            </div>
            <h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pr-12">Sign In with Email</h2>
        </div>
        <div class="flex flex-col gap-4 w-full max-w-md mx-auto">
            <input id="login-email-input" type="email" placeholder="Email" class="w-full h-12 px-4 bg-[#293038] text-white rounded-xl border-none focus:ring-2 focus:ring-[#1980e6]">
            <div class="relative">
                <input id="login-password-input" type="password" placeholder="Password" class="w-full h-12 px-4 pr-12 bg-[#293038] text-white rounded-xl border-none focus:ring-2 focus:ring-[#1980e6]">
                <button type="button" id="toggle-login-password" class="absolute right-3 top-1/2 -translate-y-1/2 text-[#9dabb8] hover:text-white transition">
                    <svg id="eye-icon-login" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256">
                        <path d="M247.31,124.76c-.35-.79-8.82-19.58-27.65-38.41C194.57,61.26,162.88,48,128,48S61.43,61.26,36.34,86.35C17.51,105.18,9,124,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208s66.57-13.26,91.66-38.34c18.83-18.83,27.3-37.61,27.65-38.4A8,8,0,0,0,247.31,124.76ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.47,133.47,0,0,1,25,128,133.33,133.33,0,0,1,48.07,97.25C70.33,75.19,97.22,64,128,64s57.67,11.19,79.93,33.25A133.46,133.46,0,0,1,231.05,128C223.84,141.46,192.43,192,128,192Zm0-112a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Z"></path>
                    </svg>
                </button>
            </div>
            <button id="email-login-button" class="flex items-center justify-center h-12 px-5 bg-[#1980e6] text-white text-base font-bold rounded-xl w-full">
                <span>Sign In</span>
            </button>
            <p id="login-error-message" class="text-red-500 text-sm text-center h-4"></p>
            <p class="text-center text-sm text-[#9dabb8]">
                Don't have an account? 
                <a id="go-to-signup" href="#" class="font-bold text-white">Sign Up</a>
            </p>
        </div>
    </div>

    <!-- Screen 1.6: Email Sign Up -->
    <div id="email-signup-screen" class="screen relative size-full min-h-screen flex-col bg-[#111418] dark justify-start group/design-root overflow-x-hidden p-4">
        <div class="flex items-center w-full mb-8">
            <div id="go-to-login-from-signup" class="text-white flex size-12 shrink-0 items-center cursor-pointer">
                 <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256"><path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path></svg>
            </div>
            <h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pr-12">Create Account</h2>
        </div>
        <div class="flex flex-col gap-4 w-full max-w-md mx-auto">
            <!-- Email with validation -->
            <div class="relative">
                <input id="signup-email-input" type="email" placeholder="Email" class="w-full h-12 px-4 bg-[#293038] text-white rounded-xl border-none focus:ring-2 focus:ring-[#1980e6]">
                <p id="signup-email-error" class="text-red-500 text-xs mt-1 h-4"></p>
            </div>
            
            <!-- Password with show/hide and strength indicator -->
            <div class="relative">
                <input id="signup-password-input" type="password" placeholder="Password (min 6 characters)" class="w-full h-12 px-4 pr-12 bg-[#293038] text-white rounded-xl border-none focus:ring-2 focus:ring-[#1980e6]">
                <button type="button" id="toggle-signup-password" class="absolute right-3 top-1/2 -translate-y-1/2 text-[#9dabb8] hover:text-white transition">
                    <svg id="eye-icon-signup" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256">
                        <path d="M247.31,124.76c-.35-.79-8.82-19.58-27.65-38.41C194.57,61.26,162.88,48,128,48S61.43,61.26,36.34,86.35C17.51,105.18,9,124,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208s66.57-13.26,91.66-38.34c18.83-18.83,27.3-37.61,27.65-38.4A8,8,0,0,0,247.31,124.76ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.47,133.47,0,0,1,25,128,133.33,133.33,0,0,1,48.07,97.25C70.33,75.19,97.22,64,128,64s57.67,11.19,79.93,33.25A133.46,133.46,0,0,1,231.05,128C223.84,141.46,192.43,192,128,192Zm0-112a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Z"></path>
                    </svg>
                </button>
                <!-- Password Strength Indicator -->
                <div class="flex gap-1 mt-2">
                    <div id="strength-bar-1" class="h-1 flex-1 bg-[#293038] rounded transition-colors duration-300"></div>
                    <div id="strength-bar-2" class="h-1 flex-1 bg-[#293038] rounded transition-colors duration-300"></div>
                    <div id="strength-bar-3" class="h-1 flex-1 bg-[#293038] rounded transition-colors duration-300"></div>
                    <div id="strength-bar-4" class="h-1 flex-1 bg-[#293038] rounded transition-colors duration-300"></div>
                </div>
                <p id="password-strength-text" class="text-xs text-[#9dabb8] mt-1 h-4"></p>
            </div>
            
            <!-- Confirm Password with show/hide -->
            <div class="relative">
                <input id="signup-confirm-password-input" type="password" placeholder="Confirm Password" class="w-full h-12 px-4 pr-12 bg-[#293038] text-white rounded-xl border-none focus:ring-2 focus:ring-[#1980e6]">
                <button type="button" id="toggle-signup-confirm-password" class="absolute right-3 top-1/2 -translate-y-1/2 text-[#9dabb8] hover:text-white transition">
                    <svg id="eye-icon-signup-confirm" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256">
                        <path d="M247.31,124.76c-.35-.79-8.82-19.58-27.65-38.41C194.57,61.26,162.88,48,128,48S61.43,61.26,36.34,86.35C17.51,105.18,9,124,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208s66.57-13.26,91.66-38.34c18.83-18.83,27.3-37.61,27.65-38.4A8,8,0,0,0,247.31,124.76ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.47,133.47,0,0,1,25,128,133.33,133.33,0,0,1,48.07,97.25C70.33,75.19,97.22,64,128,64s57.67,11.19,79.93,33.25A133.46,133.46,0,0,1,231.05,128C223.84,141.46,192.43,192,128,192Zm0-112a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Z"></path>
                    </svg>
                </button>
                <p id="signup-confirm-password-error" class="text-red-500 text-xs mt-1 h-4"></p>
            </div>
            
            <button id="email-signup-button" class="flex items-center justify-center h-12 px-5 bg-[#1980e6] text-white text-base font-bold rounded-xl w-full">
                <span>Sign Up</span>
            </button>
            <p id="signup-error-message" class="text-red-500 text-sm text-center h-4"></p>
            <p class="text-center text-sm text-[#9dabb8]">
                Already have an account? 
                <a id="go-to-login" href="#" class="font-bold text-white">Sign In</a>
            </p>
        </div>
    </div>

    <!-- Other screens... -->
    <div id="upload-screen" class="screen flex-col items-center justify-center min-h-screen bg-[#111418] text-white p-4">
        <button id="logout-button" class="absolute top-4 right-4 text-sm text-gray-400 hover:text-white">Logout</button>
        <div class="text-center max-w-md mx-auto">
            <h2 id="user-greeting" class="text-2xl font-bold mb-2">Hello!</h2>
            
            <!-- Credits with Tooltip -->
            <div class="flex items-center justify-center gap-2 mb-8">
                <p id="user-credits" class="text-lg">Loading credits...</p>
                <div class="relative group">
                    <button class="text-[#9dabb8] hover:text-white transition cursor-help">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256">
                            <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z"></path>
                        </svg>
                    </button>
                    <!-- Tooltip -->
                    <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-4 py-3 bg-[#293038] text-white text-sm rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none w-64 z-10">
                        <p class="font-semibold mb-1">How Credits Work</p>
                        <p class="text-xs text-[#9dabb8] mb-2">1 credit = 1 AI transformation</p>
                        <p class="text-xs text-[#9dabb8]">Credits never expire and can be used anytime. Get more credits to keep creating!</p>
                        <div class="absolute top-full left-1/2 transform -translate-x-1/2 -mt-1">
                            <div class="border-8 border-transparent border-t-[#293038]"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- This input is hidden, it's triggered by the button -->
            <input type="file" id="file-upload" class="hidden" accept="image/jpeg,image/jpg,image/png,image/heic,image/heif" />

            <!-- This is the visible button the user clicks -->
            <button id="upload-button" class="bg-[#1980e6] text-white font-bold py-4 px-8 rounded-xl text-lg hover:bg-blue-700 transition duration-300 mb-3">
                Transform Your Photo
            </button>
            
            <!-- File Format Indicator -->
            <p class="text-sm text-gray-400 mb-2">Select a photo to begin the magic.</p>
            <div class="flex items-center justify-center gap-2 text-xs text-[#9dabb8]">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256">
                    <path d="M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"></path>
                </svg>
                <span>JPG, PNG, HEIC • Max 10MB</span>
            </div>
        </div>
    </div>
    <div id="processing-screen" class="screen flex-col items-center justify-start pt-[15vh] bg-[#111418] text-white p-4 text-center">
        <div class="w-full max-w-md">
            <!-- Brushstroke Animation -->
            <div class="brush-loader">
                <div class="brush-stroke"></div>
                <div class="brush-stroke"></div>
                <div class="brush-stroke"></div>
                <div class="brush-stroke"></div>
                <div class="brush-stroke"></div>
                <div class="canvas-text">Painting your masterpiece...</div>
            </div>
            
            <!-- Main Message -->
            <h2 class="text-2xl font-bold mb-4">Creating Your Masterpiece</h2>
            
            <!-- Inspirational Message (rotates) -->
            <p id="inspirational-message" class="text-lg text-[#9dabb8] mb-6 min-h-[3rem] transition-opacity duration-500">
                The art is the visible trace of the invisible soul...
            </p>
            
            <!-- Progress Bar -->
            <div class="w-full bg-[#293038] rounded-full h-2 mb-2 overflow-hidden">
                <div id="progress-bar" class="bg-[#1980e6] h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
            
            <!-- Progress Percentage & Time -->
            <div class="flex justify-between text-sm text-[#9dabb8] mb-4">
                <span id="progress-percentage">0%</span>
                <span id="estimated-time">Estimating time...</span>
            </div>
            
            <!-- Technical Status (subtle) -->
            <p id="loading-message" class="text-sm text-[#9dabb8] opacity-75">Preparing the canvas...</p>
        </div>
    </div>
    <div id="result-screen" class="screen relative size-full min-h-screen flex-col bg-[#111418] justify-between overflow-x-hidden">
        <div class="flex p-4 justify-between items-center">
            <button id="create-another" class="flex size-12 shrink-0 items-center justify-center rounded-xl text-white cursor-pointer">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                    <path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path>
                </svg>
            </button>
            <h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center">Your Artwork</h2>
            <button id="fullscreen-btn" class="flex size-12 shrink-0 items-center justify-center rounded-xl text-white cursor-pointer hover:bg-[#293038] transition duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                    <path d="M208,48H48A16,16,0,0,0,32,64V192a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V64A16,16,0,0,0,208,48ZM48,64H208V192H48ZM96,136V120a8,8,0,0,1,16,0v16h16a8,8,0,0,1,0,16H112a8,8,0,0,1-8-8Zm56-32h16v16a8,8,0,0,0,16,0V104a8,8,0,0,0-8-8H160a8,8,0,0,0,0,16Z"></path>
                </svg>
            </button>
        </div>
        <div class="flex flex-col items-center justify-center flex-1 px-4 pb-8">
            <!-- Before/After Container -->
            <div class="w-full max-w-md mb-6 relative" id="comparison-container">
                <!-- Comparison Toggle Buttons -->
                <div class="flex gap-2 mb-3 justify-center">
                    <button id="show-transformed" class="comparison-btn active px-4 py-2 rounded-lg font-semibold transition duration-300">
                        Artwork
                    </button>
                    <button id="show-original" class="comparison-btn px-4 py-2 rounded-lg font-semibold transition duration-300">
                        Original
                    </button>
                    <button id="show-slider" class="comparison-btn px-4 py-2 rounded-lg font-semibold transition duration-300">
                        Compare
                    </button>
                </div>
                
                <!-- Image Container with Slider -->
                <div class="relative w-full rounded-xl overflow-hidden" style="background-color: #293038; min-height: 300px; max-height: 70vh;">
                    <!-- Original Image (background) -->
                    <img id="original-image" src="" alt="Original" class="absolute top-0 left-0 w-full h-full object-contain">
                    
                    <!-- Transformed Image (overlay with clip) -->
                    <div id="transformed-container" class="absolute top-0 left-0 w-full h-full" style="clip-path: inset(0 0 0 0);">
                        <img id="transformed-image" src="" alt="Transformed" class="w-full h-full object-contain">
                    </div>
                    
                    <!-- Slider Handle -->
                    <div id="slider-handle" class="absolute top-0 bottom-0 w-1 bg-white cursor-ew-resize hidden" style="left: 50%; transform: translateX(-50%);">
                        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7 4L3 10L7 16M13 4L17 10L13 16" stroke="#111418" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex flex-col gap-3 w-full max-w-md">
                <!-- Primary Actions -->
                <div class="flex gap-3">
                    <button 
                        id="download-artwork"
                        class="flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 px-5 bg-[#1980e6] text-white text-base font-bold leading-normal flex"
                    >
                        <span class="truncate">Download</span>
                    </button>
                    <button 
                        id="share-menu-btn"
                        class="flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 px-5 bg-[#293038] text-white text-base font-bold leading-normal flex gap-2"
                    >
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 8C19.6569 8 21 6.65685 21 5C21 3.34315 19.6569 2 18 2C16.3431 2 15 3.34315 15 5C15 6.65685 16.3431 8 18 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M6 15C7.65685 15 9 13.6569 9 12C9 10.3431 7.65685 9 6 9C4.34315 9 3 10.3431 3 12C3 13.6569 4.34315 15 6 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M18 22C19.6569 22 21 20.6569 21 19C21 17.3431 19.6569 16 18 16C16.3431 16 15 17.3431 15 19C15 20.6569 16.3431 22 18 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M8.59 13.51L15.42 17.49M15.41 6.51L8.59 10.49" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="truncate">Share</span>
                    </button>
                </div>
                
                <!-- Share Options (Hidden by default) -->
                <div id="share-options" class="hidden flex-col gap-2 bg-[#293038] rounded-xl p-4">
                    <p class="text-white text-sm font-semibold mb-2">Share your artwork</p>
                    
                    <!-- Before/After Collage -->
                    <button id="generate-collage" class="share-option-btn flex items-center gap-3 p-3 rounded-lg hover:bg-[#3a4149] transition duration-300">
                        <div class="w-10 h-10 rounded-full bg-[#1980e6] flex items-center justify-center">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 3h8v8H3V3zm10 0h8v8h-8V3zM3 13h8v8H3v-8zm10 0h8v8h-8v-8z"/>
                            </svg>
                        </div>
                        <div class="flex-1 text-left">
                            <p class="text-white font-semibold">Before/After Collage</p>
                            <p class="text-[#9dabb8] text-xs">Perfect for Instagram Post (1080x1080)</p>
                        </div>
                    </button>
                    
                    <!-- Instagram Story -->
                    <button id="generate-story" class="share-option-btn flex items-center gap-3 p-3 rounded-lg hover:bg-[#3a4149] transition duration-300">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-600 via-pink-600 to-orange-500 flex items-center justify-center">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                                <rect x="7" y="2" width="10" height="20" rx="2" stroke="white" stroke-width="2" fill="none"/>
                                <circle cx="12" cy="6" r="1.5" fill="white"/>
                            </svg>
                        </div>
                        <div class="flex-1 text-left">
                            <p class="text-white font-semibold">Instagram Story</p>
                            <p class="text-[#9dabb8] text-xs">Optimized format (1080x1920)</p>
                        </div>
                    </button>
                    
                    <!-- Instagram -->
                    <button id="share-instagram" class="share-option-btn flex items-center gap-3 p-3 rounded-lg hover:bg-[#3a4149] transition duration-300">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-600 via-pink-600 to-orange-500 flex items-center justify-center">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/>
                            </svg>
                        </div>
                        <div class="flex-1 text-left">
                            <p class="text-white font-semibold">Instagram Stories</p>
                            <p class="text-[#9dabb8] text-xs">Share as story (9:16)</p>
                        </div>
                    </button>
                    
                    <!-- WhatsApp -->
                    <button id="share-whatsapp" class="share-option-btn flex items-center gap-3 p-3 rounded-lg hover:bg-[#3a4149] transition duration-300">
                        <div class="w-10 h-10 rounded-full bg-[#25D366] flex items-center justify-center">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                            </svg>
                        </div>
                        <div class="flex-1 text-left">
                            <p class="text-white font-semibold">WhatsApp</p>
                            <p class="text-[#9dabb8] text-xs">Share with contacts</p>
                        </div>
                    </button>
                    
                    <!-- Facebook -->
                    <button id="share-facebook" class="share-option-btn flex items-center gap-3 p-3 rounded-lg hover:bg-[#3a4149] transition duration-300">
                        <div class="w-10 h-10 rounded-full bg-[#1877F2] flex items-center justify-center">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </div>
                        <div class="flex-1 text-left">
                            <p class="text-white font-semibold">Facebook</p>
                            <p class="text-[#9dabb8] text-xs">Share on timeline</p>
                        </div>
                    </button>
                    
                    <!-- Copy Link -->
                    <button id="copy-link" class="share-option-btn flex items-center gap-3 p-3 rounded-lg hover:bg-[#3a4149] transition duration-300">
                        <div class="w-10 h-10 rounded-full bg-[#9dabb8] flex items-center justify-center">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="flex-1 text-left">
                            <p class="text-white font-semibold">Copy Link</p>
                            <p class="text-[#9dabb8] text-xs" id="copy-status">Click to copy</p>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div id="limit-screen" class="screen relative size-full min-h-screen flex-col bg-[#111418] justify-center items-center px-4">
        <div class="text-center max-w-md">
            <h2 class="text-white text-2xl font-bold mb-4">Out of Credits</h2>
            <p class="text-[#9dabb8] text-base mb-6">You've used all your credits. Get more to continue creating amazing artworks!</p>
            <button id="buy-more-credits-limit" class="bg-[#1980e6] text-white font-bold py-3 px-8 rounded-xl hover:bg-blue-700 transition duration-300 mb-4">
                Buy Credits
            </button>
            <button id="logout-from-limit" onclick="firebase.auth().signOut()" class="block w-full bg-[#293038] text-white font-bold py-3 px-6 rounded-xl hover:bg-gray-700 transition duration-300">
                Logout
            </button>
        </div>
    </div>

    <!-- Pricing Screen -->
    <div id="pricing-screen" class="screen relative size-full min-h-screen flex-col bg-[#111418] overflow-x-hidden overflow-y-auto p-4">
        <!-- Header -->
        <div class="flex items-center justify-between mb-6">
            <button id="close-pricing" class="flex size-12 shrink-0 items-center justify-center rounded-xl text-white cursor-pointer hover:bg-[#293038] transition duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                    <path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path>
                </svg>
            </button>
            <h2 class="text-white text-lg font-bold flex-1 text-center pr-12">Choose Your Plan</h2>
        </div>

        <!-- Pricing Cards -->
        <div class="max-w-6xl mx-auto w-full">
            <p class="text-[#9dabb8] text-center mb-8">Select the perfect credit package for your creative needs</p>
            
            <!-- Pricing Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                
                <!-- Starter Pack -->
                <div class="pricing-card bg-[#293038] rounded-xl p-6 flex flex-col">
                    <h3 class="text-white text-xl font-bold mb-2">Starter</h3>
                    <p class="text-[#9dabb8] text-sm mb-4">Perfect for trying</p>
                    <div class="mb-4">
                        <span class="text-white text-4xl font-bold">$4.99</span>
                    </div>
                    <div class="mb-4">
                        <p class="text-white text-2xl font-semibold">10 Credits</p>
                        <p class="text-[#9dabb8] text-sm">$0.50 per artwork</p>
                    </div>
                    <button class="buy-credits-btn mt-auto bg-[#1980e6] text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300" data-plan="starter">
                        Buy Now
                    </button>
                </div>

                <!-- Popular Pack -->
                <div class="pricing-card bg-[#1980e6] rounded-xl p-6 flex flex-col relative border-2 border-[#1980e6] shadow-lg">
                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                        <span class="bg-white text-[#1980e6] text-xs font-bold px-3 py-1 rounded-full">BEST VALUE</span>
                    </div>
                    <h3 class="text-white text-xl font-bold mb-2">Popular</h3>
                    <p class="text-white opacity-90 text-sm mb-4">Most chosen</p>
                    <div class="mb-4">
                        <span class="text-white text-4xl font-bold">$12.99</span>
                    </div>
                    <div class="mb-4">
                        <p class="text-white text-2xl font-semibold">30 Credits</p>
                        <p class="text-white opacity-90 text-sm">$0.43 per artwork</p>
                        <p class="text-white text-xs font-semibold mt-1">Save 14%</p>
                    </div>
                    <button class="buy-credits-btn mt-auto bg-white text-[#1980e6] font-bold py-3 px-6 rounded-xl hover:bg-gray-100 transition duration-300" data-plan="popular">
                        Buy Now
                    </button>
                </div>

                <!-- Pro Pack -->
                <div class="pricing-card bg-[#293038] rounded-xl p-6 flex flex-col">
                    <h3 class="text-white text-xl font-bold mb-2">Pro</h3>
                    <p class="text-[#9dabb8] text-sm mb-4">For enthusiasts</p>
                    <div class="mb-4">
                        <span class="text-white text-4xl font-bold">$29.99</span>
                    </div>
                    <div class="mb-4">
                        <p class="text-white text-2xl font-semibold">75 Credits</p>
                        <p class="text-[#9dabb8] text-sm">$0.40 per artwork</p>
                        <p class="text-green-500 text-xs font-semibold mt-1">Save 20%</p>
                    </div>
                    <button class="buy-credits-btn mt-auto bg-[#1980e6] text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300" data-plan="pro">
                        Buy Now
                    </button>
                </div>

                <!-- Artist Pack -->
                <div class="pricing-card bg-[#293038] rounded-xl p-6 flex flex-col">
                    <h3 class="text-white text-xl font-bold mb-2">Artist</h3>
                    <p class="text-[#9dabb8] text-sm mb-4">For professionals</p>
                    <div class="mb-4">
                        <span class="text-white text-4xl font-bold">$69.99</span>
                    </div>
                    <div class="mb-4">
                        <p class="text-white text-2xl font-semibold">200 Credits</p>
                        <p class="text-[#9dabb8] text-sm">$0.35 per artwork</p>
                        <p class="text-green-500 text-xs font-semibold mt-1">Save 30%</p>
                    </div>
                    <button class="buy-credits-btn mt-auto bg-[#1980e6] text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300" data-plan="artist">
                        Buy Now
                    </button>
                </div>
            </div>

            <!-- Features -->
            <div class="bg-[#293038] rounded-xl p-6 mb-8">
                <h3 class="text-white text-lg font-bold mb-4 text-center">What You Get</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                    <div class="flex items-start gap-3">
                        <svg class="w-5 h-5 text-[#1980e6] mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        <div>
                            <p class="text-white font-semibold">Gemini 2.5 Flash</p>
                            <p class="text-[#9dabb8]">Latest AI model</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <svg class="w-5 h-5 text-[#1980e6] mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        <div>
                            <p class="text-white font-semibold">High Resolution</p>
                            <p class="text-[#9dabb8]">Up to 1024px</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <svg class="w-5 h-5 text-[#1980e6] mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        <div>
                            <p class="text-white font-semibold">Instant Download</p>
                            <p class="text-[#9dabb8]">PNG format</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FAQ -->
            <div class="text-center text-sm text-[#9dabb8]">
                <p class="mb-2">Secure payment powered by Stripe</p>
                <p>Credits never expire • Cancel anytime</p>
            </div>
        </div>
    </div>

    <!-- Legacy script.js kept as backup - remove after testing -->
    <!-- <script src="script.js"></script> -->

    <!-- New modular architecture -->
    <script type="module" src="src/main.js"></script>
</body>
</html>
